{"ast":null,"code":"import { computed, signal } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/swapi.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction CharacterListComponent_option_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const f_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", f_r1.url);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\" Episode \", f_r1.episode_id, \" \\u2014 \", f_r1.title, \" \");\n  }\n}\nfunction CharacterListComponent_option_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const s_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", s_r2.url);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(s_r2.name);\n  }\n}\nfunction CharacterListComponent_li_36_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 16);\n    i0.ɵɵlistener(\"click\", function CharacterListComponent_li_36_Template_li_click_0_listener() {\n      const p_r4 = i0.ɵɵrestoreView(_r3).$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.open(p_r4));\n    });\n    i0.ɵɵelementStart(1, \"span\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 17);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const p_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r4.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r4.birth_year);\n  }\n}\nexport let CharacterListComponent = /*#__PURE__*/(() => {\n  class CharacterListComponent {\n    swapi;\n    router;\n    people = signal([]);\n    films = signal([]);\n    species = signal([]);\n    selectedFilmUrl = '';\n    selectedSpeciesUrl = '';\n    minYear = null;\n    maxYear = null;\n    searchTerm = '';\n    filtered = computed(() => {\n      const term = this.searchTerm.toLowerCase().trim();\n      return this.people().filter(p => {\n        if (term && !p.name.toLowerCase().includes(term)) return false;\n        if (this.selectedFilmUrl && !p.films.includes(this.selectedFilmUrl)) return false;\n        if (this.selectedSpeciesUrl && !p.species.includes(this.selectedSpeciesUrl)) return false;\n        const parsed = this.swapi.parseBirthYear(p.birth_year);\n        if (this.minYear !== null && parsed !== null && parsed < this.minYear) return false;\n        if (this.maxYear !== null && parsed !== null && parsed > this.maxYear) return false;\n        if ((this.minYear !== null || this.maxYear !== null) && parsed === null) return false;\n        return true;\n      });\n    });\n    constructor(swapi, router) {\n      this.swapi = swapi;\n      this.router = router;\n      this.swapi.getAllPeople().subscribe(all => {\n        this.people.set(all);\n        this.swapi.prefetchForFilters(all).subscribe(([films, species]) => {\n          this.films.set([...films].sort((a, b) => a.episode_id - b.episode_id));\n          this.species.set([...species].sort((a, b) => a.name.localeCompare(b.name)));\n        });\n      });\n    }\n    open(p) {\n      const id = this.swapi.idFromUrl(p.url);\n      this.router.navigate(['/characters', id]);\n    }\n    clearFilters() {\n      this.selectedFilmUrl = '';\n      this.selectedSpeciesUrl = '';\n      this.minYear = null;\n      this.maxYear = null;\n      this.searchTerm = '';\n    }\n    static ɵfac = function CharacterListComponent_Factory(t) {\n      return new (t || CharacterListComponent)(i0.ɵɵdirectiveInject(i1.SwapiService), i0.ɵɵdirectiveInject(i2.Router));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: CharacterListComponent,\n      selectors: [[\"app-character-list\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 37,\n      vars: 10,\n      consts: [[1, \"layout\"], [1, \"filters\"], [1, \"field\"], [3, \"ngModelChange\", \"ngModel\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"range-row\"], [\"type\", \"number\", \"placeholder\", \"-30=30BBY\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"number\", \"placeholder\", \"5=5ABY\", 3, \"ngModelChange\", \"ngModel\"], [3, \"click\"], [1, \"list-card\"], [1, \"list-header\"], [\"type\", \"search\", \"placeholder\", \"Search\\u2026\", 1, \"search\", 3, \"ngModelChange\", \"ngModel\"], [1, \"list\"], [\"class\", \"item\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [1, \"item\", 3, \"click\"], [1, \"chip\"]],\n      template: function CharacterListComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"section\", 0)(1, \"aside\", 1)(2, \"h2\");\n          i0.ɵɵtext(3, \"Filters\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"div\", 2)(5, \"label\");\n          i0.ɵɵtext(6, \"Movie\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"select\", 3);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function CharacterListComponent_Template_select_ngModelChange_7_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.selectedFilmUrl, $event) || (ctx.selectedFilmUrl = $event);\n            return $event;\n          });\n          i0.ɵɵelementStart(8, \"option\", 4);\n          i0.ɵɵtext(9, \"All\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(10, CharacterListComponent_option_10_Template, 2, 3, \"option\", 5);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(11, \"div\", 2)(12, \"label\");\n          i0.ɵɵtext(13, \"Species\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"select\", 3);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function CharacterListComponent_Template_select_ngModelChange_14_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.selectedSpeciesUrl, $event) || (ctx.selectedSpeciesUrl = $event);\n            return $event;\n          });\n          i0.ɵɵelementStart(15, \"option\", 4);\n          i0.ɵɵtext(16, \"All\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(17, CharacterListComponent_option_17_Template, 2, 2, \"option\", 5);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(18, \"div\", 2)(19, \"label\");\n          i0.ɵɵtext(20, \"Birth Year Range\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(21, \"div\", 6)(22, \"input\", 7);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function CharacterListComponent_Template_input_ngModelChange_22_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.minYear, $event) || (ctx.minYear = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(23, \"span\");\n          i0.ɵɵtext(24, \"to\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(25, \"input\", 8);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function CharacterListComponent_Template_input_ngModelChange_25_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.maxYear, $event) || (ctx.maxYear = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(26, \"button\", 9);\n          i0.ɵɵlistener(\"click\", function CharacterListComponent_Template_button_click_26_listener() {\n            return ctx.clearFilters();\n          });\n          i0.ɵɵtext(27, \"Clear\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(28, \"section\", 10)(29, \"div\", 11)(30, \"h2\");\n          i0.ɵɵtext(31, \"Characters\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(32, \"span\");\n          i0.ɵɵtext(33);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(34, \"input\", 12);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function CharacterListComponent_Template_input_ngModelChange_34_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.searchTerm, $event) || (ctx.searchTerm = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(35, \"ul\", 13);\n          i0.ɵɵtemplate(36, CharacterListComponent_li_36_Template, 5, 2, \"li\", 14);\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(7);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.selectedFilmUrl);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.films());\n          i0.ɵɵadvance(4);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.selectedSpeciesUrl);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.species());\n          i0.ɵɵadvance(5);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.minYear);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.maxYear);\n          i0.ɵɵadvance(8);\n          i0.ɵɵtextInterpolate2(\"\", ctx.filtered().length, \" of \", ctx.people().length, \"\");\n          i0.ɵɵadvance();\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.searchTerm);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngForOf\", ctx.filtered());\n        }\n      },\n      dependencies: [CommonModule, i3.NgForOf, FormsModule, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.NumberValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgModel],\n      styles: [\".layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:280px 1fr;gap:1rem}@media (max-width: 800px){.layout[_ngcontent-%COMP%]{grid-template-columns:1fr}}.filters[_ngcontent-%COMP%]{background:var(--card);padding:1rem;border-radius:.5rem}.field[_ngcontent-%COMP%]{margin-bottom:.8rem;display:flex;flex-direction:column}.field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.9rem;color:var(--muted)}.list-card[_ngcontent-%COMP%]{background:var(--card);padding:1rem;border-radius:.5rem}.list[_ngcontent-%COMP%]{list-style:none;padding:0;display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:.5rem}.item[_ngcontent-%COMP%]{background:#0f1422;padding:.6rem;border-radius:.5rem;display:flex;justify-content:space-between;cursor:pointer}.item[_ngcontent-%COMP%]:hover{border:1px solid var(--accent)}.chip[_ngcontent-%COMP%]{background:var(--chip);padding:.2rem .4rem;border-radius:.3rem;font-size:.8rem}\"]\n    });\n  }\n  return CharacterListComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}